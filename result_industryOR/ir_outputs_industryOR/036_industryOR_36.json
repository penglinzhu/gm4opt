{
  "meta": {
    "problem_id": "industryOR_36",
    "source": "IndustryOR",
    "description": "The contract booking numbers for three products, I, II, and III, for each quarter of the next year are shown in Table 1-10.\n\nTable 1-10\n\\begin{tabular}{c|c|c|c|c}\n\\hline \\multirow{2}{*}{ Product } & \\multicolumn{4}{|c}{ Quarter } \\\\\n\\cline { 2 - 5 } & 1 & 2 & 3 & 4 \\\\\n\\hline I & 1500 & 1000 & 2000 & 1200 \\\\\nII & 1500 & 1500 & 1200 & 1500 \\\\\nIII & 1000 & 2000 & 1500 & 2500 \\\\\n\\hline\n\\end{tabular}\n\nAt the beginning of the first quarter, there is no inventory for any of the three products. It is required to have 150 units of inventory for each product at the end of the fourth quarter. It is known that the factory has 15,000 hours of production time per quarter, and it takes 2, 4, and 3 hours respectively to produce one unit of products I, II, and III. Due to equipment replacement, product I cannot be produced in the second quarter. It is stipulated that if a product cannot be delivered on time, a compensation of $20 per unit per quarter will be paid for products I and II, and $10 for product III. Additionally, for products produced but not delivered in the same quarter, there is a storage cost of $5 per unit per quarter. How should the factory arrange its production to minimize the total compensation and storage costs?",
    "sense": "min",
    "version": "v1"
  },
  "sets": [
    {
      "name": "Products",
      "elements": [
        "I",
        "II",
        "III"
      ],
      "description": "Set of products"
    },
    {
      "name": "Quarters",
      "elements": [
        "1",
        "2",
        "3",
        "4"
      ],
      "description": "Set of quarters"
    }
  ],
  "params": [
    {
      "name": "demand",
      "indices": [
        "Products",
        "Quarters"
      ],
      "values": {
        "I": {
          "1": 1500,
          "2": 1000,
          "3": 2000,
          "4": 1200
        },
        "II": {
          "1": 1500,
          "2": 1500,
          "3": 1200,
          "4": 1500
        },
        "III": {
          "1": 1000,
          "2": 2000,
          "3": 1500,
          "4": 2500
        }
      },
      "description": "Demand for each product in each quarter"
    },
    {
      "name": "production_time",
      "indices": [
        "Products"
      ],
      "values": {
        "I": 2,
        "II": 4,
        "III": 3
      },
      "description": "Production time required per unit for each product"
    },
    {
      "name": "compensation_cost",
      "indices": [
        "Products"
      ],
      "values": {
        "I": 20,
        "II": 20,
        "III": 10
      },
      "description": "Compensation cost per unit per quarter for late delivery"
    },
    {
      "name": "storage_cost",
      "indices": [],
      "values": 5,
      "description": "Storage cost per unit per quarter"
    },
    {
      "name": "production_capacity",
      "indices": [],
      "values": 15000,
      "description": "Total production hours available per quarter"
    }
  ],
  "vars": [
    {
      "name": "produce",
      "indices": [
        "Products",
        "Quarters"
      ],
      "vartype": "integer",
      "lb": 0,
      "ub": null,
      "description": "Units produced of each product in each quarter"
    },
    {
      "name": "inventory",
      "indices": [
        "Products",
        "Quarters"
      ],
      "vartype": "integer",
      "lb": 0,
      "ub": null,
      "description": "Inventory of each product at the end of each quarter"
    },
    {
      "name": "compensation",
      "indices": [
        "Products",
        "Quarters"
      ],
      "vartype": "integer",
      "lb": 0,
      "ub": null,
      "description": "Units not delivered on time for each product in each quarter"
    }
  ],
  "objective": {
    "name": "total_cost",
    "sense": "min",
    "expr": "quicksum(compensation_cost[p] * compensation[p][q] + storage_cost * inventory[p][q] for p in Products for q in Quarters)",
    "description": "Minimize total compensation and storage costs"
  },
  "constraints": [
    {
      "name": "inventory_balance_1",
      "expr_lhs": "inventory[p]['1']",
      "sense": "==",
      "expr_rhs": "produce[p]['1'] - demand[p]['1'] + compensation[p]['1']",
      "description": "Inventory balance for quarter 1"
    },
    {
      "name": "inventory_balance_2",
      "expr_lhs": "inventory[p]['2']",
      "sense": "==",
      "expr_rhs": "inventory[p]['1'] + produce[p]['2'] - demand[p]['2'] + compensation[p]['2']",
      "description": "Inventory balance for quarter 2"
    },
    {
      "name": "inventory_balance_3",
      "expr_lhs": "inventory[p]['3']",
      "sense": "==",
      "expr_rhs": "inventory[p]['2'] + produce[p]['3'] - demand[p]['3'] + compensation[p]['3']",
      "description": "Inventory balance for quarter 3"
    },
    {
      "name": "inventory_balance_4",
      "expr_lhs": "inventory[p]['4']",
      "sense": "==",
      "expr_rhs": "inventory[p]['3'] + produce[p]['4'] - demand[p]['4'] + compensation[p]['4']",
      "description": "Inventory balance for quarter 4"
    },
    {
      "name": "end_inventory_requirement",
      "expr_lhs": "inventory[p]['4']",
      "sense": "==",
      "expr_rhs": "150",
      "description": "End of year inventory requirement for each product"
    },
    {
      "name": "production_capacity_1",
      "expr_lhs": "quicksum(production_time[p] * produce[p]['1'] for p in Products)",
      "sense": "<=",
      "expr_rhs": "production_capacity",
      "description": "Production capacity constraint for quarter 1"
    },
    {
      "name": "production_capacity_2",
      "expr_lhs": "quicksum(production_time[p] * produce[p]['2'] for p in Products)",
      "sense": "<=",
      "expr_rhs": "production_capacity",
      "description": "Production capacity constraint for quarter 2"
    },
    {
      "name": "production_capacity_3",
      "expr_lhs": "quicksum(production_time[p] * produce[p]['3'] for p in Products)",
      "sense": "<=",
      "expr_rhs": "production_capacity",
      "description": "Production capacity constraint for quarter 3"
    },
    {
      "name": "production_capacity_4",
      "expr_lhs": "quicksum(production_time[p] * produce[p]['4'] for p in Products)",
      "sense": "<=",
      "expr_rhs": "production_capacity",
      "description": "Production capacity constraint for quarter 4"
    },
    {
      "name": "no_production_I_q2",
      "expr_lhs": "produce['I']['2']",
      "sense": "==",
      "expr_rhs": "0",
      "description": "No production of product I in quarter 2"
    }
  ]
}