{
  "meta": {
    "problem_id": "factory_production_planning",
    "source": null,
    "description": "Factory production planning to minimize compensation and storage costs",
    "sense": "min",
    "version": 1
  },
  "sets": [
    {
      "name": "PRODUCTS",
      "elements": [
        "I",
        "II",
        "III"
      ],
      "description": "Product types"
    },
    {
      "name": "QUARTERS",
      "elements": [
        "1",
        "2",
        "3",
        "4"
      ],
      "description": "Quarter indices"
    }
  ],
  "params": [
    {
      "name": "demand",
      "indices": [
        "PRODUCTS",
        "QUARTERS"
      ],
      "values": {
        "I": {
          "1": 1500,
          "2": 1000,
          "3": 2000,
          "4": 1200
        },
        "II": {
          "1": 1500,
          "2": 1500,
          "3": 1200,
          "4": 1500
        },
        "III": {
          "1": 1000,
          "2": 2000,
          "3": 1500,
          "4": 2500
        }
      },
      "description": "Contract booking numbers for each product and quarter"
    },
    {
      "name": "production_time",
      "indices": [
        "PRODUCTS"
      ],
      "values": {
        "I": 2,
        "II": 4,
        "III": 3
      },
      "description": "Production time per unit for each product"
    },
    {
      "name": "compensation_cost",
      "indices": [
        "PRODUCTS"
      ],
      "values": {
        "I": 20,
        "II": 20,
        "III": 10
      },
      "description": "Compensation cost per unit per quarter for late delivery"
    },
    {
      "name": "storage_cost",
      "indices": [],
      "values": 5,
      "description": "Storage cost per unit per quarter"
    },
    {
      "name": "production_capacity",
      "indices": [],
      "values": 15000,
      "description": "Total production hours available per quarter"
    }
  ],
  "vars": [
    {
      "name": "produce",
      "indices": [
        "PRODUCTS",
        "QUARTERS"
      ],
      "vartype": "integer",
      "lb": 0,
      "ub": null,
      "description": "Units of product produced in each quarter"
    },
    {
      "name": "inventory",
      "indices": [
        "PRODUCTS",
        "QUARTERS"
      ],
      "vartype": "integer",
      "lb": 0,
      "ub": null,
      "description": "Inventory of product at the end of each quarter"
    },
    {
      "name": "compensate",
      "indices": [
        "PRODUCTS",
        "QUARTERS"
      ],
      "vartype": "integer",
      "lb": 0,
      "ub": null,
      "description": "Units of product not delivered on time"
    }
  ],
  "objective": {
    "name": "min_total_cost",
    "sense": "min",
    "expr": "sum(compensation_cost[p] * compensate[p][q] + storage_cost * inventory[p][q] for p in PRODUCTS for q in QUARTERS)",
    "description": "Minimize total compensation and storage costs"
  },
  "constraints": [
    {
      "name": "inventory_balance",
      "expr_lhs": "inventory[p][str(int(q)-1)] + produce[p][q] - demand[p][q] - inventory[p][q]",
      "sense": "==",
      "expr_rhs": "0",
      "description": "Inventory balance for each product and quarter",
      "indices": [
        "PRODUCTS",
        "QUARTERS"
      ],
      "condition": "q != '1'"
    },
    {
      "name": "initial_inventory",
      "expr_lhs": "produce[p]['1'] - demand[p]['1'] - inventory[p]['1']",
      "sense": "==",
      "expr_rhs": "0",
      "description": "Initial inventory balance for each product",
      "indices": [
        "PRODUCTS"
      ]
    },
    {
      "name": "end_inventory_requirement",
      "expr_lhs": "inventory[p]['4']",
      "sense": ">=",
      "expr_rhs": "150",
      "description": "End of year inventory requirement for each product",
      "indices": [
        "PRODUCTS"
      ]
    },
    {
      "name": "production_capacity_constraint",
      "expr_lhs": "sum(production_time[p] * produce[p][q] for p in PRODUCTS)",
      "sense": "<=",
      "expr_rhs": "production_capacity",
      "description": "Production capacity constraint for each quarter",
      "indices": [
        "QUARTERS"
      ]
    },
    {
      "name": "compensation_calculation",
      "expr_lhs": "demand[p][q] - produce[p][q] - compensate[p][q]",
      "sense": "==",
      "expr_rhs": "0",
      "description": "Compensation calculation for each product and quarter",
      "indices": [
        "PRODUCTS",
        "QUARTERS"
      ]
    },
    {
      "name": "no_production_product_I_q2",
      "expr_lhs": "produce['I']['2']",
      "sense": "==",
      "expr_rhs": "0",
      "description": "Product I cannot be produced in the second quarter"
    }
  ],
  "graph": null
}